---

- name: Install network tools
  apt:
    name: net-tools
    state: present

- name: Add hostname to hosts
  lineinfile:
    path: "/etc/hosts"
    line: "{{ item }}"
  with_items:
    - "127.0.0.1 {{ inventory_hostname }}"

- name: Ensure default ubuntu user is removed
  user:
    name: ubuntu
    state: absent
    remove: yes

- name: "Ensure {{ cluster_user }} have a default password"
  user:
    name: "{{ cluster_user }}"
    state: present
    password: "{{ 'cluster_user_password' | password_hash('sha512') }}"

